{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{Container,Row,Col,Card,Button,ProgressBar}from'react-bootstrap';import{useAuth}from'../contexts/AuthContext';import axios from'axios';import'../styles/Meditation.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const meditationSessions=[{id:1,title:\"Mindful Breathing\",duration:300,// 5 minutes in seconds\ndescription:\"A gentle introduction to meditation focusing on breath awareness.\",audioUrl:\"/meditations/mindful-breathing.mp3\"},{id:2,title:\"Body Scan Relaxation\",duration:600,// 10 minutes\ndescription:\"Progressive relaxation technique moving through the entire body.\",audioUrl:\"/meditations/body-scan.mp3\"},{id:3,title:\"Loving Kindness\",duration:900,// 15 minutes\ndescription:\"Develop compassion for yourself and others through guided meditation.\",audioUrl:\"/meditations/loving-kindness.mp3\"}];const Meditation=()=>{const[activeSession,setActiveSession]=useState(null);const[isPlaying,setIsPlaying]=useState(false);const[progress,setProgress]=useState(0);const[timeRemaining,setTimeRemaining]=useState(0);const audioRef=useRef(null);const{currentUser}=useAuth();useEffect(()=>{let timer;if(isPlaying&&activeSession){timer=setInterval(()=>{const current=audioRef.current.currentTime;const duration=audioRef.current.duration;setProgress(current/duration*100);setTimeRemaining(Math.ceil(duration-current));},1000);}return()=>clearInterval(timer);},[isPlaying,activeSession]);const startSession=async session=>{setActiveSession(session);audioRef.current.src=session.audioUrl;await audioRef.current.play();setIsPlaying(true);};const togglePlayPause=()=>{if(isPlaying){audioRef.current.pause();}else{audioRef.current.play();}setIsPlaying(!isPlaying);};const endSession=async()=>{try{await axios.post('/api/meditation/complete',{sessionId:activeSession.id,duration:activeSession.duration,userId:currentUser.id},{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});}catch(error){console.error('Error saving meditation session:',error);}audioRef.current.pause();audioRef.current.currentTime=0;setActiveSession(null);setIsPlaying(false);setProgress(0);};const formatTime=seconds=>{const minutes=Math.floor(seconds/60);const remainingSeconds=seconds%60;return`${minutes}:${remainingSeconds.toString().padStart(2,'0')}`;};return/*#__PURE__*/_jsxs(Container,{className:\"meditation-page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mb-5 fade-in\",children:\"Meditation\"}),/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,onEnded:endSession}),!activeSession?/*#__PURE__*/_jsx(Row,{children:meditationSessions.map(session=>/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-4\",children:/*#__PURE__*/_jsx(Card,{className:\"h-100 meditation-card fade-in\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:session.title}),/*#__PURE__*/_jsx(Card.Text,{children:session.description}),/*#__PURE__*/_jsx(Card.Text,{children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Duration: \",formatTime(session.duration)]})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:()=>startSession(session),className:\"w-100\",children:\"Start Meditation\"})]})})},session.id))}):/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsx(Card,{className:\"meditation-active-card\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:activeSession.title}),/*#__PURE__*/_jsx(ProgressBar,{now:progress,className:\"my-4\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Time Remaining: \",formatTime(timeRemaining)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center gap-3\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:togglePlayPause,children:isPlaying?'Pause':'Resume'}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:endSession,children:\"End Session\"})]})]})})})})]});};export default Meditation;","map":{"version":3,"names":["React","useState","useRef","useEffect","Container","Row","Col","Card","Button","ProgressBar","useAuth","axios","jsx","_jsx","jsxs","_jsxs","meditationSessions","id","title","duration","description","audioUrl","Meditation","activeSession","setActiveSession","isPlaying","setIsPlaying","progress","setProgress","timeRemaining","setTimeRemaining","audioRef","currentUser","timer","setInterval","current","currentTime","Math","ceil","clearInterval","startSession","session","src","play","togglePlayPause","pause","endSession","post","sessionId","userId","headers","Authorization","localStorage","getItem","error","console","formatTime","seconds","minutes","floor","remainingSeconds","toString","padStart","className","children","ref","onEnded","map","md","Body","Title","Text","variant","onClick","now"],"sources":["D:/Asma Project/Project_Mar2025/Asma21March/frontend/src/pages/Meditation.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Container, Row, Col, Card, Button, ProgressBar } from 'react-bootstrap';\nimport { useAuth } from '../contexts/AuthContext';\nimport axios from 'axios';\nimport '../styles/Meditation.css';\n\nconst meditationSessions = [\n  {\n    id: 1,\n    title: \"Mindful Breathing\",\n    duration: 300, // 5 minutes in seconds\n    description: \"A gentle introduction to meditation focusing on breath awareness.\",\n    audioUrl: \"/meditations/mindful-breathing.mp3\"\n  },\n  {\n    id: 2,\n    title: \"Body Scan Relaxation\",\n    duration: 600, // 10 minutes\n    description: \"Progressive relaxation technique moving through the entire body.\",\n    audioUrl: \"/meditations/body-scan.mp3\"\n  },\n  {\n    id: 3,\n    title: \"Loving Kindness\",\n    duration: 900, // 15 minutes\n    description: \"Develop compassion for yourself and others through guided meditation.\",\n    audioUrl: \"/meditations/loving-kindness.mp3\"\n  }\n];\n\nconst Meditation = () => {\n  const [activeSession, setActiveSession] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [timeRemaining, setTimeRemaining] = useState(0);\n  const audioRef = useRef(null);\n  const { currentUser } = useAuth();\n\n  useEffect(() => {\n    let timer;\n    if (isPlaying && activeSession) {\n      timer = setInterval(() => {\n        const current = audioRef.current.currentTime;\n        const duration = audioRef.current.duration;\n        setProgress((current / duration) * 100);\n        setTimeRemaining(Math.ceil(duration - current));\n      }, 1000);\n    }\n    return () => clearInterval(timer);\n  }, [isPlaying, activeSession]);\n\n  const startSession = async (session) => {\n    setActiveSession(session);\n    audioRef.current.src = session.audioUrl;\n    await audioRef.current.play();\n    setIsPlaying(true);\n  };\n\n  const togglePlayPause = () => {\n    if (isPlaying) {\n      audioRef.current.pause();\n    } else {\n      audioRef.current.play();\n    }\n    setIsPlaying(!isPlaying);\n  };\n\n  const endSession = async () => {\n    try {\n      await axios.post('/api/meditation/complete', {\n        sessionId: activeSession.id,\n        duration: activeSession.duration,\n        userId: currentUser.id\n      }, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n      });\n    } catch (error) {\n      console.error('Error saving meditation session:', error);\n    }\n\n    audioRef.current.pause();\n    audioRef.current.currentTime = 0;\n    setActiveSession(null);\n    setIsPlaying(false);\n    setProgress(0);\n  };\n\n  const formatTime = (seconds) => {\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n  };\n\n  return (\n    <Container className=\"meditation-page\">\n      <h1 className=\"text-center mb-5 fade-in\">Meditation</h1>\n\n      <audio ref={audioRef} onEnded={endSession} />\n\n      {!activeSession ? (\n        <Row>\n          {meditationSessions.map((session) => (\n            <Col md={4} key={session.id} className=\"mb-4\">\n              <Card className=\"h-100 meditation-card fade-in\">\n                <Card.Body>\n                  <Card.Title>{session.title}</Card.Title>\n                  <Card.Text>{session.description}</Card.Text>\n                  <Card.Text>\n                    <small className=\"text-muted\">\n                      Duration: {formatTime(session.duration)}\n                    </small>\n                  </Card.Text>\n                  <Button \n                    variant=\"primary\" \n                    onClick={() => startSession(session)}\n                    className=\"w-100\"\n                  >\n                    Start Meditation\n                  </Button>\n                </Card.Body>\n              </Card>\n            </Col>\n          ))}\n        </Row>\n      ) : (\n        <Row className=\"justify-content-center\">\n          <Col md={8}>\n            <Card className=\"meditation-active-card\">\n              <Card.Body className=\"text-center\">\n                <h2>{activeSession.title}</h2>\n                <ProgressBar \n                  now={progress} \n                  className=\"my-4\"\n                />\n                <p>Time Remaining: {formatTime(timeRemaining)}</p>\n                <div className=\"d-flex justify-content-center gap-3\">\n                  <Button \n                    variant=\"primary\"\n                    onClick={togglePlayPause}\n                  >\n                    {isPlaying ? 'Pause' : 'Resume'}\n                  </Button>\n                  <Button \n                    variant=\"secondary\"\n                    onClick={endSession}\n                  >\n                    End Session\n                  </Button>\n                </div>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n      )}\n    </Container>\n  );\n};\n\nexport default Meditation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}