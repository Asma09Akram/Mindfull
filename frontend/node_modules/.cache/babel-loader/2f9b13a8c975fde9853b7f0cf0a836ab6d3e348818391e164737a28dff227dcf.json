{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export function useAuth(){return useContext(AuthContext);}export function AuthProvider(_ref){let{children}=_ref;const[currentUser,setCurrentUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const token=localStorage.getItem('token');if(token){// Verify token with backend\naxios.get('/api/auth/verify',{headers:{Authorization:`Bearer ${token}`}}).then(response=>{setCurrentUser(response.data.user);}).catch(()=>{localStorage.removeItem('token');}).finally(()=>{setLoading(false);});}else{setLoading(false);}},[]);const login=async(email,password)=>{const response=await axios.post('/api/auth/login',{email,password});const{token,user}=response.data;localStorage.setItem('token',token);setCurrentUser(user);return user;};const register=async(email,password,name)=>{const response=await axios.post('/api/auth/register',{email,password,name});const{token,user}=response.data;localStorage.setItem('token',token);setCurrentUser(user);return user;};const logout=()=>{localStorage.removeItem('token');setCurrentUser(null);};const value={currentUser,login,register,logout};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:!loading&&children});}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","jsx","_jsx","AuthContext","useAuth","AuthProvider","_ref","children","currentUser","setCurrentUser","loading","setLoading","token","localStorage","getItem","get","headers","Authorization","then","response","data","user","catch","removeItem","finally","login","email","password","post","setItem","register","name","logout","value","Provider"],"sources":["D:/Asma Project/Project_Mar2025/Asma21March/frontend/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst AuthContext = createContext();\n\nexport function useAuth() {\n  return useContext(AuthContext);\n}\n\nexport function AuthProvider({ children }) {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      // Verify token with backend\n      axios.get('/api/auth/verify', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      })\n      .then(response => {\n        setCurrentUser(response.data.user);\n      })\n      .catch(() => {\n        localStorage.removeItem('token');\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const login = async (email, password) => {\n    const response = await axios.post('/api/auth/login', {\n      email,\n      password\n    });\n    const { token, user } = response.data;\n    localStorage.setItem('token', token);\n    setCurrentUser(user);\n    return user;\n  };\n\n  const register = async (email, password, name) => {\n    const response = await axios.post('/api/auth/register', {\n      email,\n      password,\n      name\n    });\n    const { token, user } = response.data;\n    localStorage.setItem('token', token);\n    setCurrentUser(user);\n    return user;\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    setCurrentUser(null);\n  };\n\n  const value = {\n    currentUser,\n    login,\n    register,\n    logout\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC7E,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAEnC,MAAO,SAAS,CAAAQ,OAAOA,CAAA,CAAG,CACxB,MAAO,CAAAP,UAAU,CAACM,WAAW,CAAC,CAChC,CAEA,MAAO,SAAS,CAAAE,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACT;AACAZ,KAAK,CAACe,GAAG,CAAC,kBAAkB,CAAE,CAC5BC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUL,KAAK,EAChC,CACF,CAAC,CAAC,CACDM,IAAI,CAACC,QAAQ,EAAI,CAChBV,cAAc,CAACU,QAAQ,CAACC,IAAI,CAACC,IAAI,CAAC,CACpC,CAAC,CAAC,CACDC,KAAK,CAAC,IAAM,CACXT,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC,CAClC,CAAC,CAAC,CACDC,OAAO,CAAC,IAAM,CACbb,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACJ,CAAC,IAAM,CACLA,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAc,KAAK,CAAG,KAAAA,CAAOC,KAAK,CAAEC,QAAQ,GAAK,CACvC,KAAM,CAAAR,QAAQ,CAAG,KAAM,CAAAnB,KAAK,CAAC4B,IAAI,CAAC,iBAAiB,CAAE,CACnDF,KAAK,CACLC,QACF,CAAC,CAAC,CACF,KAAM,CAAEf,KAAK,CAAES,IAAK,CAAC,CAAGF,QAAQ,CAACC,IAAI,CACrCP,YAAY,CAACgB,OAAO,CAAC,OAAO,CAAEjB,KAAK,CAAC,CACpCH,cAAc,CAACY,IAAI,CAAC,CACpB,MAAO,CAAAA,IAAI,CACb,CAAC,CAED,KAAM,CAAAS,QAAQ,CAAG,KAAAA,CAAOJ,KAAK,CAAEC,QAAQ,CAAEI,IAAI,GAAK,CAChD,KAAM,CAAAZ,QAAQ,CAAG,KAAM,CAAAnB,KAAK,CAAC4B,IAAI,CAAC,oBAAoB,CAAE,CACtDF,KAAK,CACLC,QAAQ,CACRI,IACF,CAAC,CAAC,CACF,KAAM,CAAEnB,KAAK,CAAES,IAAK,CAAC,CAAGF,QAAQ,CAACC,IAAI,CACrCP,YAAY,CAACgB,OAAO,CAAC,OAAO,CAAEjB,KAAK,CAAC,CACpCH,cAAc,CAACY,IAAI,CAAC,CACpB,MAAO,CAAAA,IAAI,CACb,CAAC,CAED,KAAM,CAAAW,MAAM,CAAGA,CAAA,GAAM,CACnBnB,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC,CAChCd,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED,KAAM,CAAAwB,KAAK,CAAG,CACZzB,WAAW,CACXiB,KAAK,CACLK,QAAQ,CACRE,MACF,CAAC,CAED,mBACE9B,IAAA,CAACC,WAAW,CAAC+B,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAA1B,QAAA,CAChC,CAACG,OAAO,EAAIH,QAAQ,CACD,CAAC,CAE3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}